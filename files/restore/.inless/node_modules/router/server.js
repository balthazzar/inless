var path = require('path');

var configs = require('configs');
var routes = configs('routes');


var Router = require('./router.js');

var reactRoute = require('reactRoute');

var router = new Router;

routes.pages.forEach(function(e) {
	var pth = e.path;
	var status = e.status||8;
	var title = e.title;
	var name = e.name;
	var handler = reactRoute(require(path.resolve('./application/routes/'+name+'/react/handler.jsx')));
	var express = require(path.resolve('./application/routes/'+name+'/react/server.js'));
	router.add(pth, handler, status, title, express);
});


module.exports = router;
